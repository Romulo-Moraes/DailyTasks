<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DailyTasks</title>
    <link rel="stylesheet" href="./../css/Day.css">
    <link rel="icon" href="./../images/Task's Manager Icon.jpg">
</head>
<body>
    <div id="AddTaskForm">
        <div id="ExitFromAddTasks">
            <img src="./../images/exit.jpg" width="100%" height="100%" onclick="exitTasks()" alt="">
        </div>
        <h1>Task:</h1>
        <input type="text" class="inputZone" id="Title">
        <br/>
        <button onclick="NewTask()" class="NewTaskButton">Enviar</button>
    </div>
    <div id="dad">
        <div id="HubsPlace">
            <div class="Hubs" onclick="window.location.replace('/School')"><p>Escolar</p></div>
            <div class="Hubs" onclick="window.location.replace('/Personal')"><p>Pessoal</p></div>
            <div class="Hubs" ><p>Diárias</p></div>
            <div class="Hubs" onclick="window.location.replace('/Delay')"><p>Em atraso</p></div>
            <div class="Hubs" onclick="window.location.replace('/Statistics')"><p>Estátisticas</p></div>
        </div>
        <div id="TaskList">
            <!--
            <div class="Task">
                <h2>Titulo: Tarefa de matemática</h2>
                <h2>Descrição: Colocar em prática oque foi passado na aula.</h2>
                <h2>Inicio da atribuição: 22:31 22/11/2020</h2>
                <h2>Data de encerramento: 23:59 26/11/2020</h2>
            </div>
            -->
            
        </div>
        <div id="OptionsPlace">
            <div class="Options" onclick="openNewTaskForm()">
                <h3>Enserir Task</h3>
            </div>
            <div class="Options" onclick="remove(false)">
                <h3>Remover Task</h3>
            </div>
            <div class="Options" onclick="openProgrammedTaskForm()">
                <h3>Programar Tasks</h3>
            </div>
            <div class="Options" onclick="remove(true)">
                <h3>Concluir Task</h3>
            </div>
        </div>
    </div>
    <div id="TurnOnNotifications">
        <h1>Hello! Esse aplicativo consegue te avisar se você está com tarefas pendentes, gostaria de ativar as notificações?</h1>
        <button class="accept" onclick="enableNotification()">Sim!</button>
        <button class="denie">Não!</button>
    </div>
    <div id="ProgrammedTaskForm">
        <div id="ProgrammedTaskOptions">
            <div class="Options2" onclick="addNewProgrammedTaskQuestion()">
                Adicionar
            </div>
            <div class="Options2" onclick="removeProgrammedFormTask()">
                Remover
            </div>
            <div class="Options2" onclick="backToApplication()">
                Voltar
            </div>
        </div>
        <div id="List">
            <div class="Item">
                <h2>Lista</h2>
            </div>
            <div class="Item2">
            </div>
        </div>
    </div>
    <div id="nameAtask">
        <div class="Item"><h2>Digite uma task</h2></div>
        <div class="Item"><input type="text" name="" id="taskName" class="inputZone"></div>
        <div class="Item" id="goDown">
            <button onclick="createProgrammedTask()">Criar</button>
            <button onclick="closeProgrammedTaskQuestion()">Cancelar</button>
        </div>
    </div>
    <script>
        var lastTaskSelected = null
        var selectedProgrammedTask = null
        var selectedTask = null
    //window.localStorage.setItem("DailyTasks", null)
    //window.localStorage.setItem("ProgrammedTasks", null)
    //window.localStorage.setItem("DelayedTasks", null)
    //window.localStorage.setItem("DelayedSchoolTasks", null)
    //window.localStorage.setItem("DelayedDailyTasks", null)
    //window.localStorage.setItem("ProgrammedTasks", null)
    //window.localStorage.setItem("DailyTasks", null)
    //window.localStorage.setItem("Statistics", null)
    //window.localStorage.setItem("PersonalTasks", null)
    //window.localStorage.setItem("SchoolTasks", null)
    //window.localStorage.setItem("DelayedPersonalTask", null)
    //window.localStorage.setItem("DelayedDailyTask", null)
    
    
</script>
<script src="./../js/functions/whatsPage.js"></script>
<script src="./../js/functions/LoadAllCoockies.js"></script>
<script src="./../js/functions/whoIsHigher2.js"></script>
<script src="./../js/functions/CreateAllStatisticsDependencies.js"></script>
<script src="./../js/functions/DismemberDate.js"></script>
<script src="./../js/functions/CreateAllStatisticsDependencies.js"></script>
<script src="./../js/functions/FindDelayedTasks.js"></script>
<script src="./../js/functions/RefreshDailyTasks.js"></script>
<script src="./../js/functions/enableNotifications.js"></script>
<script src="./../js/functions/Notifications.js"></script>
<script src="./../js/functions/DateHigher.js"></script>
<script src="./../js/functions/CreateAtask.js"></script>
<script src="./../js/functions/LoadTasks.js"></script>
<script src="./../js/functions/dateFormat.js"></script>
<script src="./../js/DailyScript.js"></script>
<script src="./../js/functions/RemoveTask.js"></script>
<script>
    function config(){
        window.localStorage.setItem("ProgrammedTasks", null)
    }
    function remove(Completed){
        if(selectedTask != null){
            let tasksss = taskList.getElementsByClassName("Task")
            let i = 0
            let len = tasksss.length 
            let success = false
            while(i < len){
                let target = tasksss[i].getElementsByClassName("identificador")[0]
                if(target.getAttribute("id") == selectedTask){
                    let Statistics = JSON.parse(window.localStorage.getItem("Statistics"))
                    if(Completed == true){
                        Statistics.DailyCompleted += 1
                        Statistics.CompletedTasks += 1
                    }
                    if(Completed == false){
                        Statistics.ExcludedTasks += 1
                    }
                    window.localStorage.setItem("Statistics", JSON.stringify(Statistics))
                    tasksss[i].remove()
                    removeAtask(window.localStorage.getItem("DailyTasks"), 0 , taskList, "Daily")
                    success = true
                    break
                }
                i++
            }
            if(success == false){
                window.alert("Houve um erro ao deletar a Task")
            }
            
        }
        else{
            window.alert("Selecione uma Task primeiro!")
        }
        
        
    }
    setTimeout(function(){
            if(Notification.permission == "default"){
            var NotificationPlace = document.getElementById("TurnOnNotifications")
            NotificationPlace.style.display = "inline"
        }
    },1000)
    SendNotifications()

</script>
</body>
</html>